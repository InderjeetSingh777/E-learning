{% extends "base.html" %}
{% load course %}
{% block title %}
Module {{ module.order|add:1 }}: {{ module.title }}
{% endblock %}
{% block content %}
{% with course=module.course %}
<h1>Course "{{ course.title }}"</h1>

<div class="container">
	<div class="row">
		<div class="col contents">
			<h3>Modules</h3>
			<ul id="modules">
			{% for m in course.modules.all %}
			<li data-id="{{ m.id }}" {% if m == module %} class="selected"{% endif %}>
			<a href="{% url 'courses:module_content_list' m.id %}">
			<span>
			Module <span class="order">{{ m.order|add:1 }}</span>
			</span>
			<br>
			{{ m.title }}
			</a>
			</li>
			{% empty %}
			<li><strong>No modules yet.</strong></li>
			{% endfor %}
			</ul>
			<p><a href="{% url 'courses:course_module_update' course.id %}" style="color: #7971EA">Edit
			modules</a></p>
					</div>
		<div class="col module">
			<h2>Module {{ module.order|add:1 }}. {{ module.title }}</h2>
<h3>Module contents:</h3>
<div id="module-contents">
{% for content in module.contents.all %}
<div data-id="{{ content.id }}">
{% with item=content.item %}
<p>{{ item }}({{item|model_name}})</p>
<a href="{% url 'courses:module_content_update' module.id item|model_name item.id %}">Edit</a><br/>
<a href="{% url 'courses:module_content_delete' content.id %}">Delete</a>
{% csrf_token %}
</form>
{% endwith %}
</div>
{% empty %}
<p><strong>This module has no contents yet.</strong></p>
{% endfor %}

</div>
<hr>
<h3>Add new content:</h3>
<ul class="content-types">
<li style="background: #7971EA"><a href="{% url 'courses:module_content_create' module.id 'text' %}" style="color: white">Text</a></li>
<li style="background: #7971EA"><a href="{% url 'courses:module_content_create' module.id 'image' %}" style="color: white">Image</a></li>
<li style="background: #7971EA"><a href="{% url 'courses:module_content_create' module.id 'video' %}" style="color: white">Video</a></li>
<li style="background: #7971EA"><a href="{% url 'courses:module_content_create' module.id 'file' %}" style="color: white">File</a></li>
</ul>
		</div>
	</div>
</div>

{% endwith %}
{% endblock %}

